---
phase: 02-gsd-pipeline-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - ~/.openclaw/workspace-juancho/skills/gsd-new-project/SKILL.md
  - ~/.openclaw/workspace-juancho/skills/gsd-plan-phase/SKILL.md
  - ~/.openclaw/workspace-juancho/skills/gsd-execute-phase/SKILL.md
  - ~/.openclaw/workspace-juancho/skills/gsd-verify-phase/SKILL.md
  - ~/.openclaw/workspace-juancho/skills/gsd-research-phase/SKILL.md
  - ~/.openclaw/workspace-juancho/skills/gsd-discuss-phase/SKILL.md
autonomous: true

must_haves:
  truths:
    - "User can trigger /gsd:new-project and Juancho creates .planning/ directory with PROJECT.md, REQUIREMENTS.md, ROADMAP.md, STATE.md, config.json, and phases/ subdirectory — ROADMAP defines phases with goals, requirements, success criteria"
    - "User can trigger /gsd:plan-phase N and Juancho creates PLAN.md files with YAML frontmatter (wave, must_haves, autonomous) and multiple XML tasks (<task type='auto'> with name/files/action/verify/done)"
    - "User can trigger /gsd:execute-phase N and Juancho groups plans by wave, spawns parallel executors per wave, each executor runs tasks SEQUENTIALLY with atomic commit per task, handles checkpoints, then runs phase verification"
    - "User can trigger /gsd:verify-phase N and Juancho runs goal-backward verification — checks truths, artifacts at 3 levels (existence/substantive/wired), key links — creates VERIFICATION.md"
    - "User can trigger /gsd:research-phase N and Juancho researches before planning"
    - "User can trigger /gsd:discuss-phase N and Juancho captures implementation decisions in CONTEXT.md"
    - "Phase transitions happen after verification pass: ROADMAP updated (phase marked complete), STATE updated (next phase), REQUIREMENTS updated (phase requirements marked complete)"
  artifacts:
    - path: "~/.openclaw/workspace-juancho/skills/gsd-new-project/SKILL.md"
      provides: "Project initialization skill with .planning/ directory creation"
      min_lines: 80
    - path: "~/.openclaw/workspace-juancho/skills/gsd-plan-phase/SKILL.md"
      provides: "Phase planning orchestrator skill"
      min_lines: 60
    - path: "~/.openclaw/workspace-juancho/skills/gsd-execute-phase/SKILL.md"
      provides: "Phase execution orchestrator with wave-based parallel execution"
      min_lines: 80
    - path: "~/.openclaw/workspace-juancho/skills/gsd-verify-phase/SKILL.md"
      provides: "Phase verification skill using goal-backward analysis"
      min_lines: 50
    - path: "~/.openclaw/workspace-juancho/skills/gsd-research-phase/SKILL.md"
      provides: "Phase research skill using browser and web search"
      min_lines: 40
    - path: "~/.openclaw/workspace-juancho/skills/gsd-discuss-phase/SKILL.md"
      provides: "Phase discussion skill for capturing implementation decisions"
      min_lines: 40
  key_links:
    - from: "gsd-new-project/SKILL.md"
      to: ".planning/ directory structure"
      via: "File creation workflow using write tool"
      pattern: "PROJECT\\.md|REQUIREMENTS\\.md|ROADMAP\\.md|STATE\\.md|config\\.json"
    - from: "gsd-plan-phase/SKILL.md"
      to: "~/.claude/get-shit-done/agents/gsd-planner.md"
      via: "Reference to GSD planner methodology"
      pattern: "gsd-planner|plan-phase"
    - from: "gsd-execute-phase/SKILL.md"
      to: "~/.claude/get-shit-done/workflows/execute-plan.md"
      via: "Sub-agent spawning with execute-plan workflow"
      pattern: "sessions_spawn|execute-plan|wave"
---

<objective>
Create six GSD workspace skills that implement the /gsd:* command interface for Juancho. Each skill adapts the existing GSD methodology (from ~/.claude/get-shit-done/) into OpenClaw's skills format, providing the structured development pipeline.

Purpose: These skills are the primary user interface for Juancho's GSD workflow. They translate user commands into structured project management operations, leveraging OpenClaw's existing workspace and sub-agent orchestration.

Output: Six SKILL.md files in ~/.openclaw/workspace-juancho/skills/ that implement project initialization, phase planning, execution, verification, research, and discussion.
</objective>

<execution_context>
@/Users/didac/.claude/get-shit-done/workflows/execute-plan.md
@/Users/didac/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-gsd-pipeline-integration/02-RESEARCH.md

# GSD reference implementation (authoritative source):
@/Users/didac/.claude/get-shit-done/workflows/execute-phase.md
@/Users/didac/.claude/get-shit-done/workflows/execute-plan.md
@/Users/didac/.claude/get-shit-done/workflows/discuss-phase.md
@/Users/didac/.claude/get-shit-done/workflows/verify-phase.md
@/Users/didac/.claude/get-shit-done/references/questioning.md
@/Users/didac/.claude/get-shit-done/templates/config.json
@/Users/didac/.claude/get-shit-done/templates/phase-prompt.md
@/Users/didac/.claude/get-shit-done/templates/project.md
@/Users/didac/.claude/get-shit-done/templates/roadmap.md
@/Users/didac/.claude/get-shit-done/templates/state.md
@/Users/didac/.claude/get-shit-done/templates/requirements.md

# Phase 1 outputs (workspace file patterns):
@~/.openclaw/workspace-juancho/AGENTS.md
@~/.openclaw/workspace-juancho/SOUL.md
@~/.openclaw/workspace-juancho/IDENTITY.md

# OpenClaw skill format reference:
@/Users/didac/Juancho/skills/skill-creator/SKILL.md
@/Users/didac/Juancho/skills/coding-agent/SKILL.md

# OpenClaw agent config:
@~/.openclaw/openclaw.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create gsd-new-project and gsd-discuss-phase skills</name>
  <files>
    ~/.openclaw/workspace-juancho/skills/gsd-new-project/SKILL.md
    ~/.openclaw/workspace-juancho/skills/gsd-discuss-phase/SKILL.md
  </files>
  <action>
Create two workspace skills:

**gsd-new-project/SKILL.md:**
- Frontmatter: name "gsd-new-project", description covering what it does AND when to trigger (per OpenClaw skill-creator guidance). Triggers on "/gsd:new-project", "start a new project", "initialize project", "create .planning".
- Body workflow:
  1. Intensive questioning stage (adapt from questioning.md reference): Start open, follow energy, challenge vagueness, make abstract concrete. Use the "4 things" checklist: what they're building, why it exists, who it's for, what done looks like. Do NOT rush — follow threads until context is complete.
  2. Create .planning/ directory structure: PROJECT.md, REQUIREMENTS.md, ROADMAP.md, STATE.md, config.json, research/, phases/ directories.
  3. Use templates from ~/.claude/get-shit-done/templates/ as the structure reference.
  4. **ROADMAP structure must define phases, and each phase must have:**
     - Goal (what must be TRUE when phase is done)
     - Requirements mapped (REQ-IDs from REQUIREMENTS.md)
     - Success criteria (2-5 observable outcomes)
     - Plans: TBD (filled during /gsd:plan-phase)
  5. **STATE.md must track:** Current phase/plan position, progress bar, accumulated decisions, blockers, session continuity section.
  6. **REQUIREMENTS.md must have:** REQ-IDs per requirement, traceability table mapping each REQ to a phase, v1/v2/out-of-scope sections.
  7. config.json defaults: mode "interactive", depth "standard", autonomy_level "moderate", commit_docs true, workflow agents (research, plan_check, verifier).
  8. Git init + commit .planning/ with conventional format.
- Keep SKILL.md body under 300 lines. Core workflow only, reference GSD templates by path.
- Do NOT duplicate template content - reference it: "Read ~/.claude/get-shit-done/templates/project.md for structure"

**gsd-discuss-phase/SKILL.md:**
- Frontmatter: name "gsd-discuss-phase", description covering when to trigger ("/gsd:discuss-phase N", "discuss phase N", "let's talk about phase N").
- Body adapts the discuss-phase.md workflow: validate phase from roadmap, identify gray areas, present with selection, discussion loop (4 questions per area then check), write CONTEXT.md.
- Keep under 200 lines. Reference the full workflow for edge cases.

IMPORTANT: Skills are Markdown files read by Juancho (the AI agent). They are NOT code - they are structured instructions. Use imperative form ("Read STATE.md", "Create .planning/ directory", NOT "This skill reads STATE.md").

Watch the 20k OpenClaw bootstrapMaxChars limit - keep both files well under this. Aim for 150-250 lines each.
  </action>
  <verify>
    Both files exist:
    ls ~/.openclaw/workspace-juancho/skills/gsd-new-project/SKILL.md
    ls ~/.openclaw/workspace-juancho/skills/gsd-discuss-phase/SKILL.md
    Both have valid YAML frontmatter (name + description only).
    Body uses imperative form and references GSD templates by path.
    Neither exceeds 300 lines.
  </verify>
  <done>
    gsd-new-project skill creates .planning/ with all required files and runs intensive questioning.
    gsd-discuss-phase skill captures implementation decisions into CONTEXT.md.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create gsd-plan-phase, gsd-execute-phase, gsd-verify-phase, and gsd-research-phase skills</name>
  <files>
    ~/.openclaw/workspace-juancho/skills/gsd-plan-phase/SKILL.md
    ~/.openclaw/workspace-juancho/skills/gsd-execute-phase/SKILL.md
    ~/.openclaw/workspace-juancho/skills/gsd-verify-phase/SKILL.md
    ~/.openclaw/workspace-juancho/skills/gsd-research-phase/SKILL.md
  </files>
  <action>
Create four workspace skills:

**gsd-plan-phase/SKILL.md:**
- Triggers: "/gsd:plan-phase N", "plan phase N", "plan the next phase"
- Workflow: Read STATE.md + ROADMAP.md, determine phase, load CONTEXT.md + RESEARCH.md if they exist, spawn gsd-planner subagent with full context (inline content since @ doesn't cross Task boundaries), wait for PLAN.md files, update STATE.md + ROADMAP.md with plan count.
- Reference gsd-planner.md methodology (at ~/.claude/agents/gsd-planner.md) for the planner subagent. The skill is the ORCHESTRATOR, the planner agent does the actual planning.
- Supports --gaps flag for gap closure planning from verification failures.
- **CRITICAL — Plan structure the planner must produce:** The skill must instruct the planner to create PLAN.md files with:
  - YAML frontmatter: phase, plan, type (execute|tdd), wave, depends_on, files_modified, autonomous, must_haves (truths, artifacts, key_links)
  - Multiple tasks per plan (2-3 tasks each, ~50% context budget) using XML structure:
    ```xml
    <task type="auto">
      <name>Task N: Specific action</name>
      <files>exact/paths/here</files>
      <action>Imperative implementation instructions</action>
      <verify>Commands to confirm completion</verify>
      <done>Acceptance criteria</done>
    </task>
    ```
  - Checkpoint tasks when human verification needed:
    ```xml
    <task type="checkpoint:human-verify" gate="blocking">
      <what-built>What was automated</what-built>
      <how-to-verify>Steps user should check</how-to-verify>
      <resume-signal>How to continue</resume-signal>
    </task>
    ```
  - Wave assignment: independent plans get wave 1 (parallel), dependent plans get wave 2+
  - Each plan's <objective>, <context>, <tasks>, <verification>, <success_criteria>, <output>
- Keep under 250 lines.

**gsd-execute-phase/SKILL.md:**
- Triggers: "/gsd:execute-phase N", "execute phase N", "run the plans for phase N", "build phase N"
- Workflow adapts execute-phase.md: validate phase, discover plans (find PLAN.md without matching SUMMARY.md), group by wave (from frontmatter), execute each wave, handle checkpoints, aggregate results.
- **CRITICAL — Task-by-task execution pattern the skill must specify:**
  1. Discover incomplete plans: find *-PLAN.md files without matching *-SUMMARY.md
  2. Group plans by `wave:` from frontmatter (wave 1 runs first, then wave 2, etc.)
  3. For each wave, spawn gsd-executor subagents in parallel (one per plan) using sessions_spawn
  4. Each executor processes tasks SEQUENTIALLY within a plan:
     - For each `<task type="auto">`: execute action → verify → commit atomically → next task
     - Commit format: `{type}({phase}-{plan}): {task description}` (one commit per task, NOT per plan)
     - For each `<task type="checkpoint:*">`: STOP and return checkpoint state to orchestrator
  5. After all plans in wave complete (SUMMARY.md created), proceed to next wave
  6. After all waves complete, spawn gsd-verifier subagent for goal-backward verification
  7. On verification pass: update ROADMAP.md (mark phase complete), STATE.md (increment phase), REQUIREMENTS.md (mark requirements complete)
  8. On verification gaps: offer /gsd:plan-phase N --gaps for gap closure planning
- **Checkpoint handling:** When executor hits a checkpoint, it returns structured state. Orchestrator presents to user, collects response, spawns FRESH continuation agent (not resume) with completed tasks table + user response.
- **Deviation rules executors must follow:**
  - Auto-fix bugs (Rule 1), auto-add critical security/correctness (Rule 2), auto-fix blockers (Rule 3)
  - Only ask user about architectural changes (Rule 4)
- Sub-agent prompts must inline plan content (@ syntax does not cross Task boundaries).
- Supports --gaps-only flag to execute only gap_closure plans.
- Keep under 350 lines (this is the most complex skill).

**gsd-verify-phase/SKILL.md:**
- Triggers: "/gsd:verify-phase N", "verify phase N", "check if phase N is done"
- Workflow — goal-backward verification (verify outcomes, not tasks):
  1. Load phase goal from ROADMAP.md
  2. Load must_haves from ALL PLAN.md frontmatter in the phase directory
  3. For each truth: verify the observable behavior exists in the codebase
  4. For each artifact: check 3 levels — existence (file exists?), substantive (real code, not stub?), wired (imported and used?)
  5. For each key_link: verify the connection pattern exists (grep for pattern in source/target)
  6. Scan for anti-patterns: TODO/FIXME, stubs, empty function bodies, console.log-only error handling
  7. Determine status: passed (all truths verified) | gaps_found (truths failed) | human_needed (automated passes but needs manual check)
  8. Create VERIFICATION.md in phase directory with structured report
- Reference verify-phase.md for the full verification logic.
- Keep under 200 lines.

**gsd-research-phase/SKILL.md:**
- Triggers: "/gsd:research-phase N", "research phase N", "research before planning phase N"
- Workflow: Read ROADMAP.md for phase goal, use browser (WebFetch/WebSearch) and codebase analysis to research domain, document findings in {phase}-RESEARCH.md within phase directory.
- Covers BROW-01 requirement: browser research runs before coding.
- Keep under 150 lines.

SAME CONSTRAINTS as Task 1: imperative form, reference GSD templates by path, no content duplication, under bootstrapMaxChars limit.
  </action>
  <verify>
    All four files exist:
    ls ~/.openclaw/workspace-juancho/skills/gsd-plan-phase/SKILL.md
    ls ~/.openclaw/workspace-juancho/skills/gsd-execute-phase/SKILL.md
    ls ~/.openclaw/workspace-juancho/skills/gsd-verify-phase/SKILL.md
    ls ~/.openclaw/workspace-juancho/skills/gsd-research-phase/SKILL.md
    All have valid YAML frontmatter (name + description only).
    Body uses imperative form and references GSD workflows by path.
    gsd-execute-phase handles wave-based parallel execution.
    gsd-plan-phase references gsd-planner subagent methodology.
  </verify>
  <done>
    Six total GSD skills exist in workspace-juancho/skills/ covering the full GSD pipeline: new-project, discuss-phase, research-phase, plan-phase, execute-phase, verify-phase.
    Each skill adapts the corresponding GSD workflow into OpenClaw skills format.
    Skills reference existing GSD templates and workflows by path, not duplication.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 6 skill directories created under ~/.openclaw/workspace-juancho/skills/
- [ ] Each SKILL.md has valid YAML frontmatter with name and description only
- [ ] Description includes both what the skill does AND when to trigger it
- [ ] Body uses imperative form (commands, not descriptions)
- [ ] Skills reference GSD workflows by file path, not content duplication
- [ ] gsd-new-project creates .planning/ with PROJECT.md, REQUIREMENTS.md, ROADMAP.md, STATE.md, config.json, phases/
- [ ] gsd-new-project ROADMAP defines phases with goals, requirements, success criteria
- [ ] gsd-plan-phase instructs planner to create PLAN.md with XML task structure (<task type="auto">) and YAML frontmatter (wave, must_haves, etc.)
- [ ] gsd-plan-phase specifies plans should contain multiple tasks (2-3 tasks per plan)
- [ ] gsd-execute-phase specifies task-by-task sequential execution within each plan
- [ ] gsd-execute-phase specifies atomic commit per task (not per plan)
- [ ] gsd-execute-phase specifies wave-based parallel execution across plans
- [ ] gsd-execute-phase handles checkpoint tasks (stop, present to user, fresh continuation agent)
- [ ] gsd-execute-phase includes phase transition logic (update ROADMAP, STATE, REQUIREMENTS after verification pass)
- [ ] gsd-execute-phase includes deviation rules (auto-fix bugs/critical/blockers, ask about architectural)
- [ ] gsd-verify-phase checks 3 levels per artifact (existence, substantive, wired)
- [ ] No skill exceeds 350 lines
- [ ] No file exceeds 15k chars (staying under 20k bootstrapMaxChars limit)
</verification>

<success_criteria>
- All 6 GSD skills created and properly formatted
- Skills cover the complete GSD pipeline: init, discuss, research, plan, execute, verify
- Intensive questioning integrated into gsd-new-project (GSD-02)
- Phase-based execution workflow in gsd-execute-phase (GSD-03) with task-by-task execution and atomic commits
- Plans contain multiple tasks in XML format with proper frontmatter including wave assignment and must_haves
- Execute-phase handles: wave-based parallel plans, sequential tasks within plans, checkpoints, deviation rules, phase transitions
- Verify-phase uses goal-backward analysis: truths → artifacts (3-level check) → key links
- Browser research capability referenced in gsd-research-phase (BROW-01)
- .planning/ directory structure defined in gsd-new-project (GSD-01, DOCS-01) with phases, requirements, roadmap, state
</success_criteria>

<output>
After completion, create `.planning/phases/02-gsd-pipeline-integration/02-01-SUMMARY.md`
</output>
